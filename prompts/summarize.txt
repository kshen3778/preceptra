You are generating a Standard Operating Procedure (SOP) from multiple video transcripts of expert demonstrations.

Objective:
Generate a new SOP entirely from observed workflows in the transcripts. The goal is to create a ground-truth SOP that reflects what operators actually do, including tribal knowledge, undocumented checks, shortcuts, implicit sequencing, and decision rules.

Instructions:
1. Ignore any pre-existing SOP. Do not reference or modify prior documentation.
2. Parse all transcripts to infer the actual workflow used by operators.
3. Extract all observed steps and reconstruct the task into a clean, ordered SOP.
4. Identify tribal knowledge: hidden checks, undocumented adjustments, tacit reasoning.
5. Add steps that operators consistently perform but are not formally documented.
6. Include decision rules, branching logic, or safety/quality checks visible in the transcripts.
7. Format the SOP as clear, well-structured Markdown with headings, lists, and step-by-step instructions.
8. Include any important notes or observations in a separate notes field.
9. IMPORTANT: For each major step or instruction, cite the source video and approximate timestamp where that information came from. Include these citations inline in the markdown using the format: `(Source: [videoName] at ~[timestamp]s)`

Input:
You will receive a JSON array of transcript objects. Each transcript contains:
- audio_transcript: Array of speech segments with timestamps
- visual_description: Array of visual observations with timestamps (if available)
- task_summaries: High-level summaries of task segments (if available)
- videoName: Name of the source video

Output Format:
Return a JSON object with this structure:

{
  "markdown": "# SOP Title\n\n## Overview\n[Overview text]\n\n## Steps\n\n### Step 1: [Step name]\n[Step description] (Source: video1.mp4 at ~15s)\n\n### Step 2: [Step name]\n[Step description] (Source: video2.mp4 at ~42s)\n\n...",
  "notes": "Any important observations, variations between operators, or tribal knowledge notes"
}

Example with citations:
{
  "markdown": "# Opening the Cash Register\n\n## Overview\nThis procedure covers the standard process for opening and preparing the cash register at the start of a shift.\n\n## Steps\n\n### Step 1: Verify Cash Drawer\nCount the starting cash to ensure it matches the expected amount. (Source: training_video_1.mp4 at ~45s)\n\n### Step 2: Log Into System\nEnter your employee ID and password into the POS terminal. (Source: training_video_2.mp4 at ~12s)\n\n### Step 3: Check Receipt Paper\nVerify that the receipt printer has adequate paper for the shift. (Source: training_video_1.mp4 at ~78s)",
  "notes": "Most operators check the receipt paper before logging in, even though the formal SOP says to do it after. Two operators mentioned always keeping extra receipt rolls under the counter."
}

Requirements:
- The "markdown" field must contain a complete, well-formatted SOP in Markdown syntax
- The "notes" field is optional but recommended for important observations
- Both fields must be strings
- The markdown should use proper Markdown formatting: # for main title, ## for sections, ### for subsections, - or 1. for lists
- Escape any quotes in the markdown content using backslashes (e.g., \"example\" becomes \\\"example\\\")
- Ensure all quotes, newlines, and special characters in the markdown are properly escaped for JSON
